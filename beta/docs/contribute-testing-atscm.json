{"content":"<h1 id=\"contribute-testing-atscm\">Contribute: Testing atscm</h1><p>atscm uses both unit and integration tests. <a href=\"https://mochajs.org\">Mocha</a> is used as a test runner and <a href=\"https://github.com/istanbuljs/nyc#readme\">nyc</a> for test coverage reports.</p>\n<p><strong>Test scripts:</strong></p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Command</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><code>npm run test</code></td>\n<td align=\"left\">Run all tests</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run test:unit</code></td>\n<td align=\"left\">Run all unit tests</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run test:integration</code></td>\n<td align=\"left\">Run all integration tests</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run test:watch</code></td>\n<td align=\"left\">Re-run all tests when files change</td>\n</tr>\n<tr>\n<td align=\"left\"><code>npm run test:coverage</code></td>\n<td align=\"left\">Check test coverage</td>\n</tr>\n</tbody></table>\n<h2 id=\"unit-tests\">Unit tests</h2><p>The unit tests are located inside <code>./test/src</code>. Test files are named after the module they test, e.g. unit tests for <code>./src/my/module.js</code> are inside <code>./test/src/my/module.spec.js</code>.</p>\n<h2 id=\"integration-tests\">Integration tests</h2><p>Integration tests are used to ensure cross-version and -platform compatibility. They are located inside <code>./test/integration</code>.</p>\n<h3 id=\"test-setups\">Test setups</h3><p>For most integration tests, we use test setups to create the proper project structure to test against. These are XML files that can be imported to the running atserver before the tests are run. <strong>The easiest way to create such files is with atbuilder:</strong></p>\n<ul>\n<li>First <em>connect atvise builder</em> to your running atserver</li>\n<li>Create and <em>configure the node(s)</em> you want to test against</li>\n<li>Select theses nodes, right-click them and choose <em>&quot;Export hierarchy to XML&quot;</em> from the context menu.</li>\n<li>Save the export file to <code>./test/fixtures/setup</code>.</li>\n</ul>\n<p>After this, you can use the <em>importSetup</em> method exported from <a href=\"./test/helpers/atscm.js\"><code>./test/helpers/atscm.js</code></a> to import this setup. See the existing integration tests for examples.</p>\n","sections":[{"title":"Unit tests","slug":"unit-tests"},{"title":"Integration tests","slug":"integration-tests","children":[{"title":"Test setups","slug":"test-setups"}]}],"title":"Contribute: Testing atscm"}