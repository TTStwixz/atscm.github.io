{"content":"<h1 id=\"guide-error-handling\">Guide: Error handling</h1><h2 id=\"adding-source-locations\">Adding source locations</h2><p>When a throwing an Error that was caused by client code, you should provide location info so it can be traced back to the source code.</p>\n<p>To do so, simply add additional properties to the error object, containing the source code, the start location and (optionally) the end location.</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">myTransformCode</span>(<span class=\"hljs-params\"></span>) </span>{\n  <span class=\"hljs-keyword\">const</span> sourceCode = <span class=\"hljs-string\">'the code transformed'</span>;\n\n  <span class=\"hljs-keyword\">try</span> {\n    <span class=\"hljs-comment\">// Do something that may throw an error...</span>\n  } <span class=\"hljs-keyword\">catch</span> (error) {\n    <span class=\"hljs-built_in\">Object</span>.assign(error, {\n      <span class=\"hljs-attr\">rawLines</span>: sourceCode, <span class=\"hljs-comment\">// A string containing the raw source code</span>\n      location: {\n        <span class=\"hljs-attr\">start</span>: {\n          <span class=\"hljs-attr\">line</span>: <span class=\"hljs-number\">1</span>, <span class=\"hljs-comment\">// The line number</span>\n          column: <span class=\"hljs-number\">1</span>, <span class=\"hljs-comment\">// The column number</span>\n        },\n        <span class=\"hljs-comment\">// you could add a 'end' property here, with the same signature as 'start'</span>\n      },\n    });\n\n    <span class=\"hljs-comment\">// Finally re-throw the error</span>\n    <span class=\"hljs-keyword\">throw</span> error;\n  }\n}</code></pre>\n<p><strong>Example output: XML Parse error</strong></p>\n<pre><code>[13:30:28] Using gulpfile ~/Downloads/delete/atscm-330/node_modules/atscm/out/Gulpfile.js\n[13:30:28] Starting &#39;pull&#39;...\n[13:30:30] &#39;pull&#39; errored after 1.09 s\n[13:30:30] closing tag mismatch\n  5 |   &lt;atv:gridconfig width=&quot;20&quot; gridstyle=&quot;lines&quot; enabled=&quot;false&quot; height=&quot;20&quot;/&gt;\n  6 |   &lt;atv:snapconfig width=&quot;10&quot; enabled=&quot;false&quot; height=&quot;10&quot;/&gt;\n&gt; 7 |  &lt;/metadata&gt;\n    |  ^ closing tag mismatch\n  8 | &lt;/svg&gt;\n  9 |\n   - Node: AGENT.DISPLAYS.Main</code></pre><p><strong>Details</strong></p>\n<ul>\n<li><a href=\"https://babeljs.io/docs/en/babel-code-frame\"><code>@babel/code-frame</code></a> is used to render the frame.</li>\n</ul>\n","sections":[{"title":"Adding source locations","slug":"adding-source-locations"}],"title":"Guide: Error handling"}